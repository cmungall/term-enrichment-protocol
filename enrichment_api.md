
## Base URL

Implementors are free to provide their own base URL, this will be
registered with the client.

We recommend the base URL be of the form

    http://mygroupswebsite.org/terp

Enrichment calls are generated by creating a URL

    <BASE>/enrichment

For example:

    http://mygroupswebsite.org/terp/enrichment

## Synchronous vs Asynchronous

TODO - decide if both are allowed.

With a synchronous service, the client is blocked whilst the server computes results.

With asynchronous, the server hands back the client a token (e.g. a
URL), which the client can poll periodically.

TODO - consider websockets?

## JSON payload

See the following doc:

 * [results_in_json.md](results_in_json.md)

## HTTP parameters

The following core parameters must be supported:

 * input
 * taxon

The following may be supported:

 * mode
 * input_tokens_type
 * input_tokens_object_type
 * input_tokens_database
 * input_tokens
 * background_set
 * background_set_tokens
 * background_set_size
 * correction_method
 * algorithm
 * ontology
 * subset

The implementor may extend this set, but if they do so the additional
parameters must be specified in the metadata API.

### input

The value of this parameter is formatted text, for example a
whitespace-delimited set of gene symbols.

A value for this parameter is required, unless input_tokens is
provided.

### taxon

This is the numeric portion of the NCBI Taxonomy ID for the input
species. For example, 10090 for mouse.

Implementors may not require this if they are caable of inferring the
taxon from the gene IDs

### mode

One of:

 * synchronous
 * asynchronous


### input_tokens_type

This is one of the following:

 * identifier
 * symbol

Implementors may not require this if they are caable of inferring the
types from the tokens.

Implementors may extend this list. For example, to allow genomic
intervals

### input_tokens_database

This must come from GO.dbxref_abbs

Examples:

 * UniProtKB
 * MGI
 * ENSEMBL

### input_tokens_object_type

this indicates the semantic type of the input tokens.

Examples include:

 * gene
 * transcript
 * protein
 * region
 * probe

Consult the JSON LD specs for a mapping from these labels to ontology
class IDs.

Implementors may not require this if they are caable of inferring the
semantic types from the tokens.

### input_tokens

 * MULTIVALUED

This should not be specified in input is specified.

### correction_method

If not specified, the server is free to provide a default. If the
intended outcome is to have no correction the value "no_correction"
should be specified.

The value can be an approved label, or a class ID from an ontology
such as STATO. To see the mappings between labels and ontology class
IDs, consult the JSON LD context.

Examples include:

 * no_correction
 * bonferroni
 * benjamin_hochberg

### algorithm

If not specified, the server is free to provide a default. They should
provide the name of the algorithm in the payload.

### ontology

Note that this protocol is intended to be extensible to any kind of
ontology or classification system, not just GO.

The value of this tag should be a shorthand for the formal PURL for
the ontology. Examples include:

 * go
 * doid
 * mp
 * chebi

The provider may provide a default and may only offer enrichment over
a single ontology. For example, GO enrichment tools will default to
"go" and BINCHE will default to "chebi".

NOTE: sometimes GO is conceived as 3 ontologies. However, for the
purposes of this spec, it should be treated as one, and "aspect"
should be used for ontology aspect.

### aspect

For GO the values are:

 * molecular_function
 * biological_process
 * cellular_component

The value for aspect MUST correspond to a primary label in the
ontology, with spaces replaced by underscores. For example, for CHEBI
the values may be:

 * role
 * molecular_entity

The ontology class ID may be provided instead.

If a value for aspect is passed, then the implementor MUST run the
algorithm over a subset of the ontology that includes all and only
subclasses of (i.e. is_a descendants) of the specified class.

### subset

If specified, and supported, the implementation MUST use only classes
in the specified subset (aka GO slim)